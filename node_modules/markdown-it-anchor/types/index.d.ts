import MarkdownIt = require('markdown-it');
import Token = require('markdown-it/lib/token');
import State = require('markdown-it/lib/rules_core/state_core');

declare namespace anchor ***REMOVED***
  export type RenderHref = (slug: string, state: State) => string;
  export type RenderAttrs = (slug: string, state: State) => Record<string, string | number>;

  export interface PermalinkOptions ***REMOVED***
    class?: string,
    symbol?: string,
    renderHref?: RenderHref,
    renderAttrs?: RenderAttrs
***REMOVED***

  export interface HeaderLinkPermalinkOptions extends PermalinkOptions ***REMOVED***
    safariReaderFix?: boolean;
***REMOVED***

  export interface LinkAfterHeaderPermalinkOptions extends PermalinkOptions ***REMOVED***
    style?: 'visually-hidden' | 'aria-label' | 'aria-describedby' | 'aria-labelledby',
    assistiveText?: (title: string) => string,
    visuallyHiddenClass?: string,
    space?: boolean | string,
    placement?: 'before' | 'after'
    wrapper?: [string, string] | null
***REMOVED***

  export interface LinkInsideHeaderPermalinkOptions extends PermalinkOptions ***REMOVED***
    space?: boolean | string,
    placement?: 'before' | 'after',
    ariaHidden?: boolean
***REMOVED***

  export interface AriaHiddenPermalinkOptions extends PermalinkOptions ***REMOVED***
    space?: boolean | string,
    placement?: 'before' | 'after'
***REMOVED***

  export type PermalinkGenerator = (slug: string, opts: PermalinkOptions, state: State, index: number) => void;

  export interface AnchorInfo ***REMOVED***
    slug: string;
    title: string;
***REMOVED***

  export interface AnchorOptions ***REMOVED***
    level?: number | number[];

    slugify?(str: string): string;
    getTokensText?(tokens: Token[]): string;

    uniqueSlugStartIndex?: number;
    permalink?: PermalinkGenerator;

    callback?(token: Token, anchor_info: AnchorInfo): void;

    tabIndex?: number | false;
***REMOVED***

  export const permalink: ***REMOVED***
    headerLink: (opts?: HeaderLinkPermalinkOptions) => PermalinkGenerator
    linkAfterHeader: (opts?: LinkAfterHeaderPermalinkOptions) => PermalinkGenerator
    linkInsideHeader: (opts?: LinkInsideHeaderPermalinkOptions) => PermalinkGenerator
    ariaHidden: (opts?: AriaHiddenPermalinkOptions) => PermalinkGenerator
***REMOVED***;
}

declare function anchor(md: MarkdownIt, opts?: anchor.AnchorOptions): void;

export default anchor;
