/**
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * Google API Extensions
 */
import type ***REMOVED*** Message } from 'protobufjs';
import ***REMOVED*** BundleOptions } from './bundlingCalls/bundleExecutor';
/**
 * Encapsulates the overridable settings for a particular API call.
 *
 * ``CallOptions`` is an optional arg for all GAX API calls.  It is used to
 * configure the settings of a specific API call.
 *
 * When provided, its values override the GAX service defaults for that
 * particular call.
 *
 * Typically the API clients will accept this as the second to the last
 * argument. See the examples below.
 * @typedef ***REMOVED***Object} CallOptions
 * @property ***REMOVED***number=} timeout - The client-side timeout for API calls.
 * @property ***REMOVED***RetryOptions=} retry - determines whether and how to retry
 *   on transient errors. When set to null, the call will not retry.
 * @property ***REMOVED***boolean=} autoPaginate - If set to false and the call is
 *   configured for paged iteration, page unrolling is not performed, instead
 *   the callback will be called with the response object.
 * @property ***REMOVED***Object=} pageToken - If set and the call is configured for
 *   paged iteration, paged iteration is not performed and requested with this
 *   pageToken.
 * @property ***REMOVED***number} maxResults - If set and the call is configured for
 *   paged iteration, the call will stop when the number of response elements
 *   reaches to the specified size. By default, it will unroll the page to
 *   the end of the list.
 * @property ***REMOVED***boolean=} isBundling - If set to false and the call is configured
 *   for bundling, bundling is not performed.
 * @property ***REMOVED***BackoffSettings=} longrunning - BackoffSettings used for polling.
 * @example
 * // suppress bundling for bundled method.
 * api.bundlingMethod(
 *     param, ***REMOVED***optParam: aValue, isBundling: false}, function(err, response) ***REMOVED***
 *   // handle response.
 * });
 * @example
 * // suppress streaming for page-streaming method.
 * api.pageStreamingMethod(
 *     param, ***REMOVED***optParam: aValue, autoPaginate: false}, function(err, page) ***REMOVED***
 *   // not returning a stream, but callback is called with the paged response.
 * });
 */
/**
 * Per-call configurable settings for retrying upon transient failure.
 * @typedef ***REMOVED***Object} RetryOptions
 * @property ***REMOVED***String[]} retryCodes
 * @property ***REMOVED***BackoffSettings} backoffSettings
 */
export declare class RetryOptions ***REMOVED***
    retryCodes: number[];
    backoffSettings: BackoffSettings;
    constructor(retryCodes: number[], backoffSettings: BackoffSettings);
}
export interface RetryRequestOptions ***REMOVED***
    objectMode?: boolean;
    request?: any;
    retries?: number;
    noResponseRetries?: number;
    currentRetryAttempt?: number;
    shouldRetryFn?: () => boolean;
}
/**
 * Parameters to the exponential backoff algorithm for retrying.
 * @typedef ***REMOVED***Object} BackoffSettings
 * @property ***REMOVED***number} initialRetryDelayMillis - the initial delay time,
 *   in milliseconds, between the completion of the first failed request and the
 *   initiation of the first retrying request.
 * @property ***REMOVED***number} retryDelayMultiplier - the multiplier by which to
 *   increase the delay time between the completion of failed requests, and the
 *   initiation of the subsequent retrying request.
 * @property ***REMOVED***number} maxRetryDelayMillis - the maximum delay time, in
 *   milliseconds, between requests. When this value is reached,
 *   ``retryDelayMultiplier`` will no longer be used to increase delay time.
 * @property ***REMOVED***number} initialRpcTimeoutMillis - the initial timeout parameter
 *   to the request.
 * @propetry ***REMOVED***number} rpcTimeoutMultiplier - the multiplier by which to
 *   increase the timeout parameter between failed requests.
 * @property ***REMOVED***number} maxRpcTimeoutMillis - the maximum timeout parameter, in
 *   milliseconds, for a request. When this value is reached,
 *   ``rpcTimeoutMultiplier`` will no longer be used to increase the timeout.
 * @property ***REMOVED***number} totalTimeoutMillis - the total time, in milliseconds,
 *   starting from when the initial request is sent, after which an error will
 *   be returned, regardless of the retrying attempts made meanwhile.
 */
export interface BackoffSettings ***REMOVED***
    maxRetries?: number;
    initialRetryDelayMillis: number;
    retryDelayMultiplier: number;
    maxRetryDelayMillis: number;
    initialRpcTimeoutMillis?: number | null;
    maxRpcTimeoutMillis?: number | null;
    totalTimeoutMillis?: number | null;
    rpcTimeoutMultiplier?: number | null;
}
export interface CallOptions ***REMOVED***
    timeout?: number;
    retry?: Partial<RetryOptions> | null;
    autoPaginate?: boolean;
    maxResults?: number;
    maxRetries?: number;
    otherArgs?: ***REMOVED***
        [index: string]: any;
  ***REMOVED***;
    bundleOptions?: BundleOptions | null;
    isBundling?: boolean;
    longrunning?: BackoffSettings;
    apiName?: string;
    retryRequestOptions?: RetryRequestOptions;
}
export declare class CallSettings ***REMOVED***
    timeout: number;
    retry?: RetryOptions | null;
    autoPaginate?: boolean;
    pageToken?: string;
    pageSize?: number;
    maxResults?: number;
    otherArgs: ***REMOVED***
        [index: string]: any;
  ***REMOVED***;
    bundleOptions?: BundleOptions | null;
    isBundling: boolean;
    longrunning?: BackoffSettings;
    apiName?: string;
    retryRequestOptions?: RetryRequestOptions;
    /**
     * @param ***REMOVED***Object} settings - An object containing parameters of this settings.
     * @param ***REMOVED***number} settings.timeout - The client-side timeout for API calls.
     *   This parameter is ignored for retrying calls.
     * @param ***REMOVED***RetryOptions} settings.retry - The configuration for retrying upon
     *   transient error. If set to null, this call will not retry.
     * @param ***REMOVED***boolean} settings.autoPaginate - If there is no `pageDescriptor`,
     *   this attrbute has no meaning. Otherwise, determines whether a page
     * streamed response should make the page structure transparent to the user by
     *   flattening the repeated field in the returned generator.
     * @param ***REMOVED***number} settings.pageToken - If there is no `pageDescriptor`,
     *   this attribute has no meaning. Otherwise, determines the page token used
     * in the page streaming request.
     * @param ***REMOVED***Object} settings.otherArgs - Additional arguments to be passed to
     *   the API calls.
     *
     * @constructor
     */
    constructor(settings?: CallOptions);
    /**
     * Returns a new CallSettings merged from this and a CallOptions object.
     *
     * @param ***REMOVED***CallOptions} options - an instance whose values override
     *   those in this object. If null, ``merge`` returns a copy of this
     *   object
     * @return ***REMOVED***CallSettings} The merged CallSettings instance.
     */
    merge(options?: CallOptions | null): CallSettings;
}
/**
 * Per-call configurable settings for retrying upon transient failure.
 *
 * @param ***REMOVED***number[]} retryCodes - a list of Google API canonical error codes
 *   upon which a retry should be attempted.
 * @param ***REMOVED***BackoffSettings} backoffSettings - configures the retry
 *   exponential backoff algorithm.
 * @return ***REMOVED***RetryOptions} A new RetryOptions object.
 *
 */
export declare function createRetryOptions(retryCodes: number[], backoffSettings: BackoffSettings): RetryOptions;
/**
 * Parameters to the exponential backoff algorithm for retrying.
 *
 * @param ***REMOVED***number} initialRetryDelayMillis - the initial delay time,
 *   in milliseconds, between the completion of the first failed request and the
 *   initiation of the first retrying request.
 * @param ***REMOVED***number} retryDelayMultiplier - the multiplier by which to
 *   increase the delay time between the completion of failed requests, and the
 *   initiation of the subsequent retrying request.
 * @param ***REMOVED***number} maxRetryDelayMillis - the maximum delay time, in
 *   milliseconds, between requests. When this value is reached,
 *   ``retryDelayMultiplier`` will no longer be used to increase delay time.
 * @param ***REMOVED***number} initialRpcTimeoutMillis - the initial timeout parameter
 *   to the request.
 * @param ***REMOVED***number} rpcTimeoutMultiplier - the multiplier by which to
 *   increase the timeout parameter between failed requests.
 * @param ***REMOVED***number} maxRpcTimeoutMillis - the maximum timeout parameter, in
 *   milliseconds, for a request. When this value is reached,
 *   ``rpcTimeoutMultiplier`` will no longer be used to increase the timeout.
 * @param ***REMOVED***number} totalTimeoutMillis - the total time, in milliseconds,
 *   starting from when the initial request is sent, after which an error will
 *   be returned, regardless of the retrying attempts made meanwhile.
 * @return ***REMOVED***BackoffSettings} a new settings.
 *
 */
export declare function createBackoffSettings(initialRetryDelayMillis: number, retryDelayMultiplier: number, maxRetryDelayMillis: number, initialRpcTimeoutMillis: number | null, rpcTimeoutMultiplier: number | null, maxRpcTimeoutMillis: number | null, totalTimeoutMillis: number | null): BackoffSettings;
export declare function createDefaultBackoffSettings(): BackoffSettings;
/**
 * Parameters to the exponential backoff algorithm for retrying.
 * This function is unsupported, and intended for internal use only.
 *
 * @param ***REMOVED***number} initialRetryDelayMillis - the initial delay time,
 *   in milliseconds, between the completion of the first failed request and the
 *   initiation of the first retrying request.
 * @param ***REMOVED***number} retryDelayMultiplier - the multiplier by which to
 *   increase the delay time between the completion of failed requests, and the
 *   initiation of the subsequent retrying request.
 * @param ***REMOVED***number} maxRetryDelayMillis - the maximum delay time, in
 *   milliseconds, between requests. When this value is reached,
 *   ``retryDelayMultiplier`` will no longer be used to increase delay time.
 * @param ***REMOVED***number} initialRpcTimeoutMillis - the initial timeout parameter
 *   to the request.
 * @param ***REMOVED***number} rpcTimeoutMultiplier - the multiplier by which to
 *   increase the timeout parameter between failed requests.
 * @param ***REMOVED***number} maxRpcTimeoutMillis - the maximum timeout parameter, in
 *   milliseconds, for a request. When this value is reached,
 *   ``rpcTimeoutMultiplier`` will no longer be used to increase the timeout.
 * @param ***REMOVED***number} maxRetries - the maximum number of retrying attempts that
 *   will be made. If reached, an error will be returned.
 * @return ***REMOVED***BackoffSettings} a new settings.
 *
 */
export declare function createMaxRetriesBackoffSettings(initialRetryDelayMillis: number, retryDelayMultiplier: number, maxRetryDelayMillis: number, initialRpcTimeoutMillis: number, rpcTimeoutMultiplier: number, maxRpcTimeoutMillis: number, maxRetries: number): BackoffSettings;
/**
 * Creates a new ***REMOVED***@link BundleOptions}.
 *
 * @private
 * @param ***REMOVED***Object} options - An object to hold optional parameters. See
 *   properties for the content of options.
 * @return ***REMOVED***BundleOptions} - A new options.
 */
export declare function createBundleOptions(options: BundlingConfig): BundleOptions;
export interface ServiceConfig ***REMOVED***
    retry_codes?: ***REMOVED***
        [index: string]: string[];
  ***REMOVED***;
    retry_params?: ***REMOVED***
        [index: string]: RetryParamsConfig;
  ***REMOVED***;
    methods: ***REMOVED***
        [index: string]: MethodConfig | null;
  ***REMOVED***;
}
export interface RetryParamsConfig ***REMOVED***
    initial_retry_delay_millis: number;
    retry_delay_multiplier: number;
    max_retry_delay_millis: number;
    initial_rpc_timeout_millis: number;
    rpc_timeout_multiplier: number;
    max_rpc_timeout_millis: number;
    total_timeout_millis: number;
}
export interface MethodConfig ***REMOVED***
    retry_codes_name?: string;
    retry_params_name?: string;
    bundling?: BundlingConfig | null;
    timeout_millis?: number;
}
export interface BundlingConfig ***REMOVED***
    element_count_threshold: number;
    element_count_limit: number;
    request_byte_threshold?: number;
    request_byte_limit?: number;
    delay_threshold_millis?: number;
}
export interface ClientConfig ***REMOVED***
    interfaces?: ***REMOVED***
        [index: string]: ServiceConfig;
  ***REMOVED***;
}
/**
 * Constructs a dictionary mapping method names to ***REMOVED***@link CallSettings}.
 *
 * The `clientConfig` parameter is parsed from a client configuration JSON
 * file of the form:
 *
 *     ***REMOVED***
 *       "interfaces": ***REMOVED***
 *         "google.fake.v1.ServiceName": ***REMOVED***
 *           "retry_codes": ***REMOVED***
 *             "idempotent": ["UNAVAILABLE", "DEADLINE_EXCEEDED"],
 *             "non_idempotent": []
 *         ***REMOVED***,
 *           "retry_params": ***REMOVED***
 *             "default": ***REMOVED***
 *               "initial_retry_delay_millis": 100,
 *               "retry_delay_multiplier": 1.2,
 *               "max_retry_delay_millis": 1000,
 *               "initial_rpc_timeout_millis": 2000,
 *               "rpc_timeout_multiplier": 1.5,
 *               "max_rpc_timeout_millis": 30000,
 *               "total_timeout_millis": 45000
 *           ***REMOVED***
 *         ***REMOVED***,
 *           "methods": ***REMOVED***
 *             "CreateFoo": ***REMOVED***
 *               "retry_codes_name": "idempotent",
 *               "retry_params_name": "default"
 *           ***REMOVED***,
 *             "Publish": ***REMOVED***
 *               "retry_codes_name": "non_idempotent",
 *               "retry_params_name": "default",
 *               "bundling": ***REMOVED***
 *                 "element_count_threshold": 40,
 *                 "element_count_limit": 200,
 *                 "request_byte_threshold": 90000,
 *                 "request_byte_limit": 100000,
 *                 "delay_threshold_millis": 100
 *             ***REMOVED***
 *           ***REMOVED***
 *         ***REMOVED***
 *       ***REMOVED***
 *     ***REMOVED***
 *   ***REMOVED***
 *
 * @param ***REMOVED***String} serviceName - The fully-qualified name of this
 *   service, used as a key into the client config file (in the
 *   example above, this value should be 'google.fake.v1.ServiceName').
 * @param ***REMOVED***Object} clientConfig - A dictionary parsed from the
 *   standard API client config file.
 * @param ***REMOVED***Object} configOverrides - A dictionary in the same structure of
 *   client_config to override the settings.
 * @param ***REMOVED***Object.<string, string[]>} retryNames - A dictionary mapping the strings
 *   referring to response status codes to objects representing
 *   those codes.
 * @param ***REMOVED***Object} otherArgs - the non-request arguments to be passed to the API
 *   calls.
 * @return ***REMOVED***Object} A mapping from method name to CallSettings, or null if the
 *   service is not found in the config.
 */
export declare function constructSettings(serviceName: string, clientConfig: ClientConfig, configOverrides: ClientConfig, retryNames: ***REMOVED***}, otherArgs?: ***REMOVED***}): any;
export declare function createByteLengthFunction(message: typeof Message): (obj: ***REMOVED***}) => number;
