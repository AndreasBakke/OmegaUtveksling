// workaround for tty output truncation on Node.js
try ***REMOVED***
    // prevent buffer overflow and other asynchronous bugs
    process.stdout._handle.setBlocking(true);
    process.stderr._handle.setBlocking(true);
} catch (e) ***REMOVED***
    // ensure output buffers are flushed before process termination
    var exit = process.exit;
    process.exit = function() ***REMOVED***
        var args = [].slice.call(arguments);
        process.once("uncaughtException", function() ***REMOVED***
            (function callback() ***REMOVED***
                if (process.stdout.bufferSize || process.stderr.bufferSize) ***REMOVED***
                    setTimeout(callback, 1);
              ***REMOVED*** else ***REMOVED***
                    exit.apply(process, args);
              ***REMOVED***
          ***REMOVED***)();
      ***REMOVED***);
        throw exit;
  ***REMOVED***;
}
