/// <reference types="node" />
import ***REMOVED*** CallCredentials } from "./call-credentials";
import ***REMOVED*** Status } from "./constants";
import ***REMOVED*** Deadline } from "./deadline";
import ***REMOVED*** Metadata } from "./metadata";
import ***REMOVED*** ServerSurfaceCall } from "./server-call";
export interface CallStreamOptions ***REMOVED***
    deadline: Deadline;
    flags: number;
    host: string;
    parentCall: ServerSurfaceCall | null;
}
export declare type PartialCallStreamOptions = Partial<CallStreamOptions>;
export interface StatusObject ***REMOVED***
    code: Status;
    details: string;
    metadata: Metadata;
}
export declare const enum WriteFlags ***REMOVED***
    BufferHint = 1,
    NoCompress = 2,
    WriteThrough = 4
}
export interface WriteObject ***REMOVED***
    message: Buffer;
    flags?: number;
}
export interface MetadataListener ***REMOVED***
    (metadata: Metadata, next: (metadata: Metadata) => void): void;
}
export interface MessageListener ***REMOVED***
    (message: any, next: (message: any) => void): void;
}
export interface StatusListener ***REMOVED***
    (status: StatusObject, next: (status: StatusObject) => void): void;
}
export interface FullListener ***REMOVED***
    onReceiveMetadata: MetadataListener;
    onReceiveMessage: MessageListener;
    onReceiveStatus: StatusListener;
}
export declare type Listener = Partial<FullListener>;
/**
 * An object with methods for handling the responses to a call.
 */
export interface InterceptingListener ***REMOVED***
    onReceiveMetadata(metadata: Metadata): void;
    onReceiveMessage(message: any): void;
    onReceiveStatus(status: StatusObject): void;
}
export declare function isInterceptingListener(listener: Listener | InterceptingListener): listener is InterceptingListener;
export declare class InterceptingListenerImpl implements InterceptingListener ***REMOVED***
    private listener;
    private nextListener;
    private processingMetadata;
    private hasPendingMessage;
    private pendingMessage;
    private processingMessage;
    private pendingStatus;
    constructor(listener: FullListener, nextListener: InterceptingListener);
    private processPendingMessage;
    private processPendingStatus;
    onReceiveMetadata(metadata: Metadata): void;
    onReceiveMessage(message: any): void;
    onReceiveStatus(status: StatusObject): void;
}
export interface WriteCallback ***REMOVED***
    (error?: Error | null): void;
}
export interface MessageContext ***REMOVED***
    callback?: WriteCallback;
    flags?: number;
}
export interface Call ***REMOVED***
    cancelWithStatus(status: Status, details: string): void;
    getPeer(): string;
    start(metadata: Metadata, listener: InterceptingListener): void;
    sendMessageWithContext(context: MessageContext, message: Buffer): void;
    startRead(): void;
    halfClose(): void;
    getCallNumber(): number;
    setCredentials(credentials: CallCredentials): void;
}
