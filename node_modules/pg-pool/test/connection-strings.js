const expect = require('expect.js')
const describe = require('mocha').describe
const it = require('mocha').it
const Pool = require('../')

describe('Connection strings', function () ***REMOVED***
  it('pool delegates connectionString property to client', function (done) ***REMOVED***
    const connectionString = 'postgres://foo:bar@baz:1234/xur'

    const pool = new Pool(***REMOVED***
      // use a fake client so we can check we're passed the connectionString
      Client: function (args) ***REMOVED***
        expect(args.connectionString).to.equal(connectionString)
        return ***REMOVED***
          connect: function (cb) ***REMOVED***
            cb(new Error('testing'))
        ***REMOVED***,
          on: function () ***REMOVED***},
      ***REMOVED***
    ***REMOVED***,
      connectionString: connectionString,
  ***REMOVED***)

    pool.connect(function (err, client) ***REMOVED***
      expect(err).to.not.be(undefined)
      done()
  ***REMOVED***)
***REMOVED***)
})
