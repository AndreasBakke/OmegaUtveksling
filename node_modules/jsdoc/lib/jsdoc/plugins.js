/**
 * Utility functions to support the JSDoc plugin framework.
 * @module jsdoc/plugins
 */
const dictionary = require('jsdoc/tag/dictionary');

function addHandlers(handlers, parser) ***REMOVED***
    Object.keys(handlers).forEach(eventName => ***REMOVED***
        parser.on(eventName, handlers[eventName]);
  ***REMOVED***);
}

exports.installPlugins = (plugins, parser) => ***REMOVED***
    let plugin;

    for (let pluginModule of plugins) ***REMOVED***
        plugin = require(pluginModule);

        // allow user-defined plugins to...
        // ...register event handlers
        if (plugin.handlers) ***REMOVED***
            addHandlers(plugin.handlers, parser);
      ***REMOVED***

        // ...define tags
        if (plugin.defineTags) ***REMOVED***
            plugin.defineTags(dictionary);
      ***REMOVED***

        // ...add a Mozilla Parser API node visitor
        if (plugin.astNodeVisitor) ***REMOVED***
            parser.addAstNodeVisitor(plugin.astNodeVisitor);
      ***REMOVED***
  ***REMOVED***
};
