define(['./restArguments', './isFunction', './_optimizeCb', './allKeys', './_keyInObj', './_flatten'], function (restArguments, isFunction, _optimizeCb, allKeys, _keyInObj, _flatten) ***REMOVED***

  // Return a copy of the object only containing the allowed properties.
  var pick = restArguments(function(obj, keys) ***REMOVED***
    var result = ***REMOVED***}, iteratee = keys[0];
    if (obj == null) return result;
    if (isFunction(iteratee)) ***REMOVED***
      if (keys.length > 1) iteratee = _optimizeCb(iteratee, keys[1]);
      keys = allKeys(obj);
  ***REMOVED*** else ***REMOVED***
      iteratee = _keyInObj;
      keys = _flatten(keys, false, false);
      obj = Object(obj);
  ***REMOVED***
    for (var i = 0, length = keys.length; i < length; i++) ***REMOVED***
      var key = keys[i];
      var value = obj[key];
      if (iteratee(value, key, obj)) result[key] = value;
  ***REMOVED***
    return result;
***REMOVED***);

  return pick;

});
