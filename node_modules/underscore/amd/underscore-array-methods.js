define(['./underscore', './each', './_setup', './_chainResult'], function (underscore, each, _setup, _chainResult) ***REMOVED***

  // Add all mutator `Array` functions to the wrapper.
  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) ***REMOVED***
    var method = _setup.ArrayProto[name];
    underscore.prototype[name] = function() ***REMOVED***
      var obj = this._wrapped;
      if (obj != null) ***REMOVED***
        method.apply(obj, arguments);
        if ((name === 'shift' || name === 'splice') && obj.length === 0) ***REMOVED***
          delete obj[0];
      ***REMOVED***
    ***REMOVED***
      return _chainResult(this, obj);
  ***REMOVED***;
***REMOVED***);

  // Add all accessor `Array` functions to the wrapper.
  each(['concat', 'join', 'slice'], function(name) ***REMOVED***
    var method = _setup.ArrayProto[name];
    underscore.prototype[name] = function() ***REMOVED***
      var obj = this._wrapped;
      if (obj != null) obj = method.apply(obj, arguments);
      return _chainResult(this, obj);
  ***REMOVED***;
***REMOVED***);

  return underscore;

});
