define(['./restArguments', './isFunction', './map', './_deepGet', './_toPath'], function (restArguments, isFunction, map, _deepGet, _toPath) ***REMOVED***

  // Invoke a method (with arguments) on every item in a collection.
  var invoke = restArguments(function(obj, path, args) ***REMOVED***
    var contextPath, func;
    if (isFunction(path)) ***REMOVED***
      func = path;
  ***REMOVED*** else ***REMOVED***
      path = _toPath(path);
      contextPath = path.slice(0, -1);
      path = path[path.length - 1];
  ***REMOVED***
    return map(obj, function(context) ***REMOVED***
      var method = func;
      if (!method) ***REMOVED***
        if (contextPath && contextPath.length) ***REMOVED***
          context = _deepGet(context, contextPath);
      ***REMOVED***
        if (context == null) return void 0;
        method = context[path];
    ***REMOVED***
      return method == null ? method : method.apply(context, args);
  ***REMOVED***);
***REMOVED***);

  return invoke;

});
