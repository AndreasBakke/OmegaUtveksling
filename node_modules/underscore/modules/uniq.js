import isBoolean from './isBoolean.js';
import cb from './_cb.js';
import getLength from './_getLength.js';
import contains from './contains.js';

// Produce a duplicate-free version of the array. If the array has already
// been sorted, you have the option of using a faster algorithm.
// The faster algorithm will not work with an iteratee if the iteratee
// is not a one-to-one function, so providing an iteratee will disable
// the faster algorithm.
export default function uniq(array, isSorted, iteratee, context) ***REMOVED***
  if (!isBoolean(isSorted)) ***REMOVED***
    context = iteratee;
    iteratee = isSorted;
    isSorted = false;
***REMOVED***
  if (iteratee != null) iteratee = cb(iteratee, context);
  var result = [];
  var seen = [];
  for (var i = 0, length = getLength(array); i < length; i++) ***REMOVED***
    var value = array[i],
        computed = iteratee ? iteratee(value, i, array) : value;
    if (isSorted && !iteratee) ***REMOVED***
      if (!i || seen !== computed) result.push(value);
      seen = computed;
  ***REMOVED*** else if (iteratee) ***REMOVED***
      if (!contains(seen, computed)) ***REMOVED***
        seen.push(computed);
        result.push(value);
    ***REMOVED***
  ***REMOVED*** else if (!contains(result, value)) ***REMOVED***
      result.push(value);
  ***REMOVED***
***REMOVED***
  return result;
}
