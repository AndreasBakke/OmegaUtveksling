"use strict";

Object.defineProperty(exports, "__esModule", ***REMOVED***
  value: true
});
exports.URL = exports.DNS = void 0;
exports.default = v35;

var _stringify = require("./stringify.js");

var _parse = _interopRequireDefault(require("./parse.js"));

function _interopRequireDefault(obj) ***REMOVED*** return obj && obj.__esModule ? obj : ***REMOVED*** default: obj }; }

function stringToBytes(str) ***REMOVED***
  str = unescape(encodeURIComponent(str)); // UTF8 escape

  const bytes = [];

  for (let i = 0; i < str.length; ++i) ***REMOVED***
    bytes.push(str.charCodeAt(i));
***REMOVED***

  return bytes;
}

const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
exports.DNS = DNS;
const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
exports.URL = URL;

function v35(name, version, hashfunc) ***REMOVED***
  function generateUUID(value, namespace, buf, offset) ***REMOVED***
    var _namespace;

    if (typeof value === 'string') ***REMOVED***
      value = stringToBytes(value);
  ***REMOVED***

    if (typeof namespace === 'string') ***REMOVED***
      namespace = (0, _parse.default)(namespace);
  ***REMOVED***

    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) ***REMOVED***
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
  ***REMOVED*** // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


    let bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) ***REMOVED***
      offset = offset || 0;

      for (let i = 0; i < 16; ++i) ***REMOVED***
        buf[offset + i] = bytes[i];
    ***REMOVED***

      return buf;
  ***REMOVED***

    return (0, _stringify.unsafeStringify)(bytes);
***REMOVED*** // Function#name is not settable on some platforms (#270)


  try ***REMOVED***
    generateUUID.name = name; // eslint-disable-next-line no-empty
***REMOVED*** catch (err) ***REMOVED***} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
}