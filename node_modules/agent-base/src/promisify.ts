import ***REMOVED***
	Agent,
	ClientRequest,
	RequestOptions,
	AgentCallbackCallback,
	AgentCallbackPromise,
	AgentCallbackReturn
} from './index';

type LegacyCallback = (
	req: ClientRequest,
	opts: RequestOptions,
	fn: AgentCallbackCallback
) => void;

export default function promisify(fn: LegacyCallback): AgentCallbackPromise ***REMOVED***
	return function(this: Agent, req: ClientRequest, opts: RequestOptions) ***REMOVED***
		return new Promise((resolve, reject) => ***REMOVED***
			fn.call(
				this,
				req,
				opts,
				(err: Error | null | undefined, rtn?: AgentCallbackReturn) => ***REMOVED***
					if (err) ***REMOVED***
						reject(err);
					} else ***REMOVED***
						resolve(rtn);
					}
				}
			);
		});
	};
}
