<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>taffy test</title>

  <script src="./taffy.js"></script>

  <script>
  // recursive object compare, for future use
  Object.prototype.equals = function (x) ***REMOVED***
    var p;
    for(p in this) ***REMOVED***
      if(typeof(x[p])=='undefined') ***REMOVED***return false;}
  ***REMOVED***

    for(p in this) ***REMOVED***
      if (this[p]) ***REMOVED***
        switch(typeof(this[p])) ***REMOVED***
          case 'object':
            if (! this[p].equals(x[p])) ***REMOVED*** return false; }
          break;
          case 'function':
            if (typeof(x[p])=='undefined' ||
              (p != 'equals' && this[p].toString() != x[p].toString())
            )***REMOVED*** return false; }
            break;
          default:
            if (this[p] != x[p]) ***REMOVED*** return false; }
      ***REMOVED***
    ***REMOVED***
      else ***REMOVED***
        if (x[p])***REMOVED*** return false; }
    ***REMOVED***
  ***REMOVED***

    for(p in x) ***REMOVED***
      if(typeof(this[p])=='undefined') ***REMOVED***return false;}
  ***REMOVED***

    return true;
***REMOVED***;



  var key_name, data_val, friends_table, taffy_map;
  friends_table = TAFFY([
    ***REMOVED***"id":1,"gender":"M","first":"John","last":"Smith","city":"Seattle, WA","status":"Active"},
    ***REMOVED***"id":2,"gender":"F","first":"Kelly","last":"Ruth","city":"Dallas, TX","status":"Active"},
    ***REMOVED***"id":3,"gender":"M","first":"Jeff","last":"Stevenson","city":"Washington, D.C.","status":"Active"},
    ***REMOVED***"id":4,"gender":"F","first":"Jennifer","last":"Gill","city":"Seattle, WA","status":"Active"}  
  ]);

  taffy_map = ***REMOVED***
    t_by_city       : friends_table(***REMOVED***city:"Seattle, WA"}),
    t_by_id         : friends_table(***REMOVED***id:1}),
    t_by_id_f       : friends_table(***REMOVED***id:'1'}),
    t_by_name       : friends_table(***REMOVED***first:'John',last:'Smith'}),
    kelly_by_id     : friends_table(***REMOVED***id:2}).first(),
    kelly_last_name : friends_table(***REMOVED***id:2}).first().last,
    id_list         : friends_table().select('id'),
    city_list       : friends_table().distinct('city'),
***REMOVED***;

  for ( key_name in taffy_map )***REMOVED***
    if ( taffy_map.hasOwnProperty(key_name) )***REMOVED***
      data_val = taffy_map[key_name];
      console.warn(key_name, data_val);
      if ( data_val.hasOwnProperty('get') )***REMOVED***
        console.warn(JSON.stringify(data_val.get()));
    ***REMOVED***
      console.warn('----------------');
  ***REMOVED***
***REMOVED***
  </script>
</head>
<body>
<div>
Please open your javascript console to see test results
</div>
</body>
</html>


