'use strict';
// classic singleton yargs API, to use yargs
// without running as a singleton do:
// require('yargs/yargs')(process.argv.slice(2))
const ***REMOVED***Yargs, processArgv} = require('./build/index.cjs');

Argv(processArgv.hideBin(process.argv));

module.exports = Argv;

function Argv(processArgs, cwd) ***REMOVED***
  const argv = Yargs(processArgs, cwd, require);
  singletonify(argv);
  return argv;
}

/*  Hack an instance of Argv with process.argv into Argv
    so people can do
    require('yargs')(['--beeble=1','-z','zizzle']).argv
    to parse a list of args and
    require('yargs').argv
    to get a parsed version of process.argv.
*/
function singletonify(inst) ***REMOVED***
  Object.keys(inst).forEach(key => ***REMOVED***
    if (key === 'argv') ***REMOVED***
      Argv.__defineGetter__(key, inst.__lookupGetter__(key));
  ***REMOVED*** else if (typeof inst[key] === 'function') ***REMOVED***
      Argv[key] = inst[key].bind(inst);
  ***REMOVED*** else ***REMOVED***
      Argv.__defineGetter__('$0', () => ***REMOVED***
        return inst.$0;
    ***REMOVED***);
      Argv.__defineGetter__('parsed', () => ***REMOVED***
        return inst.parsed;
    ***REMOVED***);
  ***REMOVED***
***REMOVED***);
}
