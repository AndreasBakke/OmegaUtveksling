const platform = process.env.__TESTING_MKDIRP_PLATFORM__ || process.platform
const ***REMOVED*** resolve, parse } = require('path')
const pathArg = path => ***REMOVED***
  if (/\0/.test(path)) ***REMOVED***
    // simulate same failure that node raises
    throw Object.assign(
      new TypeError('path must be a string without null bytes'),
      ***REMOVED***
        path,
        code: 'ERR_INVALID_ARG_VALUE',
    ***REMOVED***
    )
***REMOVED***

  path = resolve(path)
  if (platform === 'win32') ***REMOVED***
    const badWinChars = /[*|"<>?:]/
    const ***REMOVED***root} = parse(path)
    if (badWinChars.test(path.substr(root.length))) ***REMOVED***
      throw Object.assign(new Error('Illegal characters in path.'), ***REMOVED***
        path,
        code: 'EINVAL',
    ***REMOVED***)
  ***REMOVED***
***REMOVED***

  return path
}
module.exports = pathArg
